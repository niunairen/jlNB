<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>古诗随机分组工具 - 哲哲用</title>
    <style>
        body {
            font-family: -apple-system, "HarmonyOS Sans SC", sans-serif;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        textarea, input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
        }
        button {
            background-color: #007dff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:active {
            background-color: #005bb7;
        }
        .result {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .group {
            margin: 15px 0;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
        }
        .group-header {
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #e9ecef;
            transition: background 0.3s;
        }
        .group-header:hover {
            background-color: #dee2e6;
        }
        .group-header span {
            font-size: 14px;
            color: #666;
        }
        .arrow {
            font-size: 12px;
            margin-left: 10px;
            transition: transform 0.3s;
        }
        .group-content {
            padding: 15px;
            display: none;
            line-height: 1.6;
        }
        .group.active .group-content {
            display: block;
        }
        .group.active .arrow {
            transform: rotate(90deg);
        }
        /* 新增诗歌内容样式 */
        .poem-item {
            margin: 8px 0;
            background: #fff;
            border-radius: 6px;
            overflow: hidden;
        }
        .poem-header {
            padding: 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa;
            transition: background 0.3s;
        }
        .poem-header:hover {
            background-color: #e9ecef;
        }
        /* 当诗歌展开时背景变为淡蓝色 */
        .poem-item.active .poem-header {
            background-color: #e3f2fd;
        }
        .poem-content {
            display: none;
            padding: 12px;
            background-color: #e0e2e5;
            white-space: pre-line;
            line-height: 1.6;
        }
        .poem-item.active .poem-content {
            display: block;
        }
        .poem-item.active .arrow {
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>古诗随机分组工具</h2>

        <div class="input-group">
            <label>古诗名单（已预置154首）：</label>
            <textarea id="names" rows="6">
咏鹅
悯农
静夜思
春夜喜雨
望庐山瀑布
登鹳雀楼
春晓
夜宿山寺
画
鹿柴
游子吟
江雪
赋得古原草送别（草）
山居秋暝
敕勒歌
悯农二首·其二（悯农2）
黄鹤楼送孟浩然之广陵
咏柳
早发白帝城
出塞
绝句
小池
晓出净慈寺送林子方
送元二使安西
九月九日忆山东兄弟
赠汪伦
望天门山
夏日绝句
芙蓉楼送辛渐
别董大
回乡偶书
枫桥夜泊
渔歌子
寻隐者不遇
小儿垂钓
山行
清明
江上渔者
长歌行
江畔独步寻花·其六
村居
所见
梅花
宿新市徐公店
赠刘景文
舟夜书所见
回乡偶书二首·其二
乞巧
春日
饮湖上初晴后雨
嫦娥
夜书所见
惠崇春江晓景二首·其一
题西林壁
游山西村
乡村四月
望洞庭
独坐敬亭山
画鸡
江南
风
古朗月行
百家姓（节选）
千字文（节选）
山村咏怀
忆江南
四时田园杂兴·其二十五
四时田园杂兴·昼出耘田夜绩麻
鸟鸣涧
采桑子·重阳
清平乐·会昌
忆秦娥·娄山关
沁园春·雪
沁园春·长沙
七律·人民解放军占领南京
西江月·井冈山
清平乐·六盘山
七律·长征
水调歌头·重上井冈山
早春呈水部张十八员外
菩萨蛮·黄鹤楼
早下游平原回
早夏游平泉回
菊花
夜坐吟
次北固山下
春江花月夜
杂诗七首·其四
将进酒
蜀道难
送前上饶严明府摄玉山
山歌三首·其一
声声慢
声声慢·寻寻觅觅
惠州一绝
端午
洛神赋
游园不值
江南春
一剪梅
绝句二首·其一（杜甫）
长恨歌（节选二）
永遇乐·京口北固亭怀古
虞美人·春花秋月何时了
水调歌头·明月几时有
竹石
采薇（节选）
浣溪沙·游蕲水清泉寺（苏轼）
卜算子·咏梅（毛泽东）
卜算子·送鲍浩然之浙东（王观）
迢迢牵牛星
大林寺桃花（白居易）
念奴娇·赤壁怀古（苏轼）
浪淘沙·北戴河（毛泽东）
七绝·改诗赠父亲（毛泽东）
天净沙·秋思（马致远）
饮酒·其五（陶渊明）
登高（杜甫）
临江仙·滚滚长江东逝水（杨慎）
锦瑟（李商隐）
红豆（王维）
二十四节气歌
登幽州台歌（陈子昂）
春夜洛城闻笛（李白）
滁州西涧（韦应物）
关雎（《诗经》）
黄鹤楼（崔颢）
夜雨寄北（李商隐）
清平调·其一（李白）
浪淘沙令·帘外雨潺潺（李煜）
终南别业（王维）
元日
采莲曲（王昌龄）
池上（白居易）
闻官军收河南河北（杜甫）
三衢道中（曾几）
浪淘沙·其七（刘禹锡）
暮江吟（白居易）
雪梅·其一（卢梅坡）
清平乐村居
江畔独步寻花·其五（杜甫）
蜂（罗隐）
塞下曲（卢纶）
墨梅（王冕）
蝉
示儿（陆游）
题临安邸（林升）
鹊桥仙·纤云弄巧（秦观）
如梦令·元旦（毛泽东）
七绝·为女民兵题照（毛泽东）
菩萨蛮·大柏地（毛泽东）
七律·到韶山（毛泽东）
盐梅
从军行·其四（王昌龄）
山中（王勃）
滕王阁序
长恨歌（节选三）
</textarea>
        </div>

        <div class="input-group">
            <label>分组数量：</label>
            <input type="number" id="groupNum" min="1" value="4">
        </div>

        <button onclick="shuffleAndGroup()">开始随机分组</button>
        
        <div class="button-group" style="margin-top: 15px; display: flex; gap: 10px;">
            <button onclick="expandAll()">全部展开</button>
            <button onclick="collapseAll()">全部折叠</button>
        </div>
        
        <div id="result" class="result"></div>
    </div>

    <script>
        // 诗歌内容数据库
        const poemContents = {
            '咏鹅': '鹅，鹅，鹅\n曲项向天歌\n白毛浮绿水\n红掌拨清波',	
            '悯农': '锄禾日当午\n汗滴禾下土\n谁知盘中餐\n粒粒皆辛苦',	
            '静夜思': '床前明月光\n疑是地上霜\n举头望明月\n低头思故乡',	
            '春夜喜雨': '好雨知时节\n当春乃发生\n随风潜入夜\n润物细无声\n野径云俱黑\n江船火独明\n晓看红湿处\n花重锦官城',	
            '望庐山瀑布': '日照香炉生紫烟\n遥看瀑布挂前川\n飞流直下三千尺\n疑是银河落九天',	
            '登鹳雀楼': '白日依山尽\n黄河入海流\n欲穷千里目\n更上一层楼',	
            '春晓': '春眠不觉晓\n处处闻啼鸟\n夜来风雨声\n花落知多少',	
            '夜宿山寺': '危楼高百尺\n手可摘星辰\n不敢高声语\n恐惊天上人',	
            '画': '远看山有色\n近听水无声\n春去花还在\n人来鸟不惊',	
            '鹿柴': '空山不见人\n但闻人语响\n返景入深林\n复照青苔上',	
            '游子吟': '慈母手中线\n游子身上衣\n临行密密缝\n意恐迟迟归\n谁言寸草心\n报得三春晖',	
            '江雪': '千山鸟飞绝\n万径人踪灭\n孤舟蓑笠翁\n独钓寒江雪',	
            '赋得古原草送别（草）': '离离原上草\n一岁一枯荣\n野火烧不尽\n春风吹又生', 	
            '山居秋暝': '空山新雨后\n天气晚来秋\n明月松间照\n清泉石上流\n竹喧归浣女\n莲动下渔舟\n随意春芳歇\n王孙自可留', 	
            '敕勒歌': '敕勒川\n阴山下\n天似穹庐\n笼盖四野\n天苍苍\n野茫茫\n风吹草低见牛羊', 	
            '悯农二首·其二（悯农2）': '春种一粒粟\n秋收万颗子\n四海无闲田\n农夫犹饿死', 	
            // 此处省略其他诗歌...
            '长恨歌（节选二）': '七月七日长生殿\n夜半无人私语时\n在天愿作比翼鸟\n在地愿为连理枝\n天长地久有时尽\n此恨绵绵无绝期',
            '长恨歌（节选三）': '七月七日长生殿\n夜半无人私语时\n在天愿作比翼鸟\n在地愿为连理枝\n天长地久有时尽\n此恨绵绵无绝期'
            // 此处省略其他诗歌...
        };

        // 添加全局事件监听器，确保离线使用时仍然有效
        document.addEventListener('click', function(event) {
            let target = event.target;
            
            // 向上查找四层，以确保点击任何子元素都能触发展开/折叠
            for (let i = 0; i < 4; i++) {
                if (!target) break;
                
                // 检查是否是组标题
                if (target.classList && target.classList.contains('group-header')) {
                    const group = target.closest('.group');
                    if (group) {
                        group.classList.toggle('active');
                        event.stopPropagation();
                        return;
                    }
                }
                
                // 检查是否是诗歌标题
                if (target.classList && target.classList.contains('poem-header')) {
                    const poemItem = target.closest('.poem-item');
                    if (poemItem) {
                        poemItem.classList.toggle('active');
                        event.stopPropagation();
                        return;
                    }
                }
                
                // 查找父元素
                target = target.parentElement;
            }
        });

        function shuffleAndGroup() {
            const namesInput = document.getElementById('names').value;
            const groupNum = parseInt(document.getElementById('groupNum').value);
            
            const names = namesInput.split(/[\n,]/)
                .map(name => name.replace(/^\d+\.?\s*/, '').trim())
                .filter(name => name.length > 0);

            if (names.length < 1) {
                alert("请输入至少一首古诗！");
                return;
            }
            if (groupNum < 1 || groupNum > names.length) {
                alert("分组数量需在1到古诗数量之间！");
                return;
            }

            // Fisher-Yates洗牌算法
            const shuffled = [...names];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }

            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = Array.from({ length: groupNum }, (_, index) => {
                const group = shuffled.filter((_, i) => i % groupNum === index);
                return `
                    <div class="group">
                        <div class="group-header">
                            <div><strong>第 ${index + 1} 组</strong><span>（${group.length}首）</span></div>
                            <div class="arrow">▶</div>
                        </div>
                        <div class="group-content">
                            ${group.map(poem => `
                                <div class="poem-item">
                                    <div class="poem-header">
                                        ${poem}
                                        <div class="arrow">▶</div>
                                    </div>
                                    <div class="poem-content">
                                        ${poemContents[poem]?.replace(/\n/g, '<br>') || '该诗歌内容暂未收录'}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // 全部展开函数
        function expandAll() {
            const groups = document.querySelectorAll('.group');
            const poems = document.querySelectorAll('.poem-item');
            
            groups.forEach(group => {
                group.classList.add('active');
            });
            
            poems.forEach(poem => {
                poem.classList.add('active');
            });
        }
        
        // 全部折叠函数
        function collapseAll() {
            const groups = document.querySelectorAll('.group');
            const poems = document.querySelectorAll('.poem-item');
            
            groups.forEach(group => {
                group.classList.remove('active');
            });
            
            poems.forEach(poem => {
                poem.classList.remove('active');
            });
        }

        // 初始化
        window.addEventListener('DOMContentLoaded', function() {
            // 清理文本域内容
            const namesTextarea = document.getElementById('names');
            if (namesTextarea) {
                namesTextarea.value = namesTextarea.value.trim();
            }
            
            // 创建一个测试分组以确保离线时有内容可点击
            const resultDiv = document.getElementById('result');
            if (resultDiv && resultDiv.innerHTML.trim() === '') {
                resultDiv.innerHTML = `
                    <div class="group">
                        <div class="group-header">
                            <div><strong>示例分组</strong><span>（点击展开/折叠）</span></div>
                            <div class="arrow">▶</div>
                        </div>
                        <div class="group-content">
                            <div class="poem-item">
                                <div class="poem-header">
                                    静夜思
                                    <div class="arrow">▶</div>
                                </div>
                                <div class="poem-content">
                                    床前明月光<br>疑是地上霜<br>举头望明月<br>低头思故乡
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>